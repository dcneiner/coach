/*!
 * Coach, the JavaScript Dribbble API Wrapper
 * Copyright (c) 2010 by Doug Neiner
 * 
 * License: Dual licensed under MIT or GPL
 * Source: http://github.com/dcneiner/coach
 */
  
 var Coach=function(h){var j=null,k=0,i=false;callback_counter=0;queue=[];endpoint="http://api.dribbble.com";next_callback=function(b){callback_counter+=1;Coach.callbacks["c"+callback_counter]=function(a){b.call(Coach,a);Coach.onProcess&&Coach.onProcess.call(Coach)};return"Coach.callbacks.c"+callback_counter};start_timer=function(){j=window.setTimeout(function(){k=0;i==true&&Coach.onResume&&Coach.onResume.call(Coach);i=false;process_queue();j=null},6E4)};process_queue=function(){var b=queue.length,
 a=0;if(b>60)b=60;for(;a<b;a+=1)make_call(queue.shift())};make_call=function(b){j||start_timer();if(k>59){queue.push(b);if(i===false){i=true;Coach.onPause&&Coach.onPause.call(Coach)}}else{k+=1;var a=document.createElement("script");a.type="text/javascript";a.src=b;document.getElementsByTagName("head")[0].appendChild(a)}};return{callbacks:{},onPause:null,onResume:null,onProcess:null,shot:function(b,a){this.api([endpoint,"shots",b],a);return Coach},shots:function(b,a,e,c){if(b==="debuts"||b==="everyone"||
 b==="popular")return this.api([endpoint,"shots",b],a,e,c);return Coach},player:function(b){var a=this,e=[endpoint,"players",b];return{get:function(c){a.api(e,c);return a},shots:function(c,d,f,g){var l=e.slice();l.push("shots");if(typeof c!=="boolean"){g=f;f=d;d=c}else c===true&&l.push("following");a.api(l,d,f,g);return a},followers:function(c){var d=e.slice();d.push("followers");a.api(d,c);return a},following:function(c){var d=e.slice();d.push("following");a.api(d,c);return a},draftees:function(c){var d=
 e.slice();d.push("draftees");a.api(d,c);return a}}},api:function(b,a,e,c){var d={r:Math.floor(Math.random()*9999999)},f=[],g;if(typeof b!=="string")b=b.join("/");if(typeof a==="function"){c=a;a=e=h}if(typeof e==="function"){c=e;e=h}if(typeof c!=="function")return Coach;d.callback=next_callback(c);if(a!==h)d.page=a;if(e!==h)d.per_page=e;for(g in d)f.push([g,encodeURIComponent(d[g])].join("="));b=b+"?"+f.join("&");make_call(b);return Coach},api_url:endpoint}}();